<div class="dashboard-page">
  
  <!-- En-tÃªte avec message de bienvenue -->
  <div class="welcome-section">
    <h1>ğŸ­ Empire Industriel FactoQuest</h1>
    <p class="subtitle">Tableau de bord de votre empire steampunk</p>
  </div>

  <!-- KPIs principaux -->
  <div class="kpi-section">
    <h2>ğŸ“Š MÃ©triques Principales</h2>
    <div class="kpi-grid">
      <div class="kpi-card money">
        <div class="kpi-icon">ğŸ’°</div>
        <div class="kpi-content">
          <div class="kpi-label">TrÃ©sorerie</div>
          <div class="kpi-value">{{ formatNumber(dashboardStats.revenue) }}</div>
          <div class="kpi-unit">crÃ©dits</div>
        </div>
      </div>
      
      <div class="kpi-card machines">
        <div class="kpi-icon">ğŸ­</div>
        <div class="kpi-content">
          <div class="kpi-label">Machines</div>
          <div class="kpi-value">{{ dashboardStats.activeMachines }}/{{ dashboardStats.totalMachines }}</div>
          <div class="kpi-unit">actives</div>
        </div>
      </div>
      
      <div class="kpi-card production">
        <div class="kpi-icon">âš¡</div>
        <div class="kpi-content">
          <div class="kpi-label">Production</div>
          <div class="kpi-value">{{ formatNumber(dashboardStats.totalProduction) }}</div>
          <div class="kpi-unit">cycles/min</div>
        </div>
      </div>
      
      <div class="kpi-card resources">
        <div class="kpi-icon">ğŸ“¦</div>
        <div class="kpi-content">
          <div class="kpi-label">Ressources</div>
          <div class="kpi-value">{{ formatNumber(dashboardStats.totalResources) }}</div>
          <div class="kpi-unit">unitÃ©s</div>
        </div>
      </div>
    </div>
  </div>

  <!-- EfficacitÃ© des machines -->
  <div class="efficiency-section" *ngIf="machines$ | async as machines">
    <h2>âš™ï¸ EfficacitÃ© des Machines</h2>
    <div class="efficiency-grid">
      <div class="efficiency-card">
        <div class="machine-type">
          <span class="type-icon">ğŸ”ï¸</span>
          <span class="type-name">Mines</span>
          <span class="type-count">({{ getMachinesByType(machines, 'mine').length }})</span>
        </div>
        <div class="efficiency-bar">
          <div class="efficiency-fill" 
               [style.width.%]="getTypeEfficiency(machines, 'mine')"
               [style.background-color]="getEfficiencyColor(getTypeEfficiency(machines, 'mine'))">
          </div>
        </div>
        <div class="efficiency-text">
          <span class="efficiency-percent">{{ getTypeEfficiency(machines, 'mine').toFixed(0) }}%</span>
          <span class="efficiency-status" [style.color]="getEfficiencyColor(getTypeEfficiency(machines, 'mine'))">
            {{ getEfficiencyStatus(getTypeEfficiency(machines, 'mine')) }}
          </span>
        </div>
      </div>

      <div class="efficiency-card">
        <div class="machine-type">
          <span class="type-icon">ğŸ”¥</span>
          <span class="type-name">Fours</span>
          <span class="type-count">({{ getMachinesByType(machines, 'furnace').length }})</span>
        </div>
        <div class="efficiency-bar">
          <div class="efficiency-fill" 
               [style.width.%]="getTypeEfficiency(machines, 'furnace')"
               [style.background-color]="getEfficiencyColor(getTypeEfficiency(machines, 'furnace'))">
          </div>
        </div>
        <div class="efficiency-text">
          <span class="efficiency-percent">{{ getTypeEfficiency(machines, 'furnace').toFixed(0) }}%</span>
          <span class="efficiency-status" [style.color]="getEfficiencyColor(getTypeEfficiency(machines, 'furnace'))">
            {{ getEfficiencyStatus(getTypeEfficiency(machines, 'furnace')) }}
          </span>
        </div>
      </div>

      <div class="efficiency-card">
        <div class="machine-type">
          <span class="type-icon">âš™ï¸</span>
          <span class="type-name">Assembleurs</span>
          <span class="type-count">({{ getMachinesByType(machines, 'assembler').length }})</span>
        </div>
        <div class="efficiency-bar">
          <div class="efficiency-fill" 
               [style.width.%]="getTypeEfficiency(machines, 'assembler')"
               [style.background-color]="getEfficiencyColor(getTypeEfficiency(machines, 'assembler'))">
          </div>
        </div>
        <div class="efficiency-text">
          <span class="efficiency-percent">{{ getTypeEfficiency(machines, 'assembler').toFixed(0) }}%</span>
          <span class="efficiency-status" [style.color]="getEfficiencyColor(getTypeEfficiency(machines, 'assembler'))">
            {{ getEfficiencyStatus(getTypeEfficiency(machines, 'assembler')) }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Top ressources -->
  <div class="resources-section">
    <h2>ğŸ† Top Ressources</h2>
    <div class="resources-grid">
      <div class="resource-card" *ngFor="let resource of topResources; let i = index">
        <div class="resource-rank">{{ i + 1 }}</div>
        <div class="resource-info">
          <span class="resource-icon">{{ resource.resourceIcon }}</span>
          <div class="resource-details">
            <div class="resource-name">{{ resource.resourceName }}</div>
            <div class="resource-stats">
              <span class="stock">{{ formatNumber(resource.quantity) }} en stock</span>
              <span class="production" *ngIf="resource.productionRate > 0">
                +{{ resource.productionRate.toFixed(1) }}/min
              </span>
            </div>
          </div>
        </div>
        <div class="resource-value">
          <div class="value-bar">
            <div class="value-fill" [style.width.%]="(resource.quantity / topResources[0].quantity) * 100"></div>
          </div>
        </div>
      </div>
      
      <div *ngIf="topResources.length === 0" class="no-resources">
        <p>ğŸš€ Commencez Ã  produire pour voir vos ressources apparaÃ®tre ici !</p>
      </div>
    </div>
  </div>

  <!-- Analyse financiÃ¨re -->
  <div class="financial-section">
    <h2>ğŸ’¼ Analyse FinanciÃ¨re</h2>
    <div class="financial-grid">
      <div class="financial-card">
        <div class="financial-header">
          <span class="financial-icon">ğŸ’</span>
          <span class="financial-title">Valeur des Stocks</span>
        </div>
        <div class="financial-value">{{ formatNumber(calculatePotentialRevenue()) }} ğŸ’°</div>
        <div class="financial-description">Valeur estimÃ©e de vos ressources</div>
      </div>
      
      <div class="financial-card">
        <div class="financial-header">
          <span class="financial-icon">ğŸ“ˆ</span>
          <span class="financial-title">EfficacitÃ© Globale</span>
        </div>
        <div class="financial-value" [style.color]="getEfficiencyColor(dashboardStats.efficiency)">
          {{ dashboardStats.efficiency.toFixed(0) }}%
        </div>
        <div class="financial-description">Machines actives / Total</div>
      </div>
      
      <div class="financial-card">
        <div class="financial-header">
          <span class="financial-icon">ğŸ¯</span>
          <span class="financial-title">Objectif</span>
        </div>
        <div class="financial-value">{{ formatNumber(100000) }} ğŸ’°</div>
        <div class="financial-description">Prochain palier Ã  atteindre</div>
      </div>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="quick-actions-section">
    <h2>âš¡ Actions Rapides</h2>
    <div class="actions-grid">
      <a routerLink="/mines" class="action-card mines">
        <div class="action-icon">ğŸ”ï¸</div>
        <div class="action-title">GÃ©rer les Mines</div>
        <div class="action-description">Extraction de minerais</div>
      </a>
      
      <a routerLink="/furnaces" class="action-card furnaces">
        <div class="action-icon">ğŸ”¥</div>
        <div class="action-title">GÃ©rer les Fours</div>
        <div class="action-description">Fonte des minerais</div>
      </a>
      
      <a routerLink="/assemblers" class="action-card assemblers">
        <div class="action-icon">âš™ï¸</div>
        <div class="action-title">GÃ©rer les Assembleurs</div>
        <div class="action-description">Fabrication d'objets</div>
      </a>
    </div>
  </div>

</div>